<!DOCTYPE html>
<html>
<head>
    <title>Deadlift Analysis API</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        img {
            width: 100%;
            max-width: 640px;
            border: 2px solid #333;
            border-radius: 10px;
        }
        .stats {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .endpoints {
            text-align: left;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        .status-fixed {
            color: #4CAF50;
            font-weight: bold;
        }
        .mobile-info {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .api-endpoint {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèãÔ∏è Deadlift Form Analysis API</h1>
        <p>Real-time pose detection with biomechanical analysis on black screen</p>
        <p class="status-fixed">‚úÖ FIXED: Pose direction now matches your actual movement</p>
        
        <div class="stats">
            <h3>Live Pose Detection Feed</h3>
            <img src="/video_feed" alt="Live Pose Detection">
        </div>
        
        <div class="endpoints">
            <h3>üì° API Endpoints</h3>
            
            <div class="api-endpoint">
                <strong>GET <code>/video_feed</code></strong>
                <p>Live video stream with pose mesh on black screen</p>
            </div>
            
            <div class="api-endpoint">
                <strong>GET <code>/stats</code></strong>
                <p>Current statistics (reps, form quality, etc.)</p>
            </div>
            
            <div class="api-endpoint">
                <strong>POST <code>/reset</code></strong>
                <p>Reset rep counter</p>
            </div>
            
            <div class="api-endpoint">
                <strong>POST <code>/process_frame</code></strong>
                <p>Process single frame</p>
            </div>
        </div>
        
        <div class="mobile-info">
            <h3>üì± Mobile Integration</h3>
            <p>Your Android app can directly consume the <code>/video_feed</code> endpoint</p>
            <p>Simply point your ImageView to: <code>http://your-server:5005/video_feed</code></p>
            <p><strong>Example Android code:</strong></p>
            <div style="background: #333; padding: 15px; border-radius: 5px; text-align: left; font-family: monospace; font-size: 12px;">
                // In your Android activity<br/>
                ImageView poseView = findViewById(R.id.pose_view);<br/>
                String serverUrl = "http://192.168.1.100:5005/video_feed";<br/>
                // Use any image loading library that supports MJPEG streams<br/>
                Glide.with(this).load(serverUrl).into(poseView);
            </div>
        </div>
    </div>
    
    <script>
        // Auto-refresh the image to ensure smooth video stream
        setInterval(() => {
            const img = document.querySelector('img');
            const currentSrc = img.src.split('?')[0];
            img.src = currentSrc + '?t=' + new Date().getTime();
        }, 100);
        
        // Periodically update stats (optional enhancement)
        setInterval(() => {
            fetch('/stats')
                .then(response => response.json())
                .then(data => {
                    // You can update DOM elements with current stats here
                    console.log('Current stats:', data);
                })
                .catch(error => console.log('Error fetching stats:', error));
        }, 2000);
    </script>
</body>
</html>